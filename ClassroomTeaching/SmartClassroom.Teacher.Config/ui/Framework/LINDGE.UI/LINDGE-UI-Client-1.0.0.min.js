!function(){"use strict";angular.module("LINDGE-UI-Client",["LINDGE-Service","LINDGE-UI-Core","LINDGE.UI-Client.Control.CardSelect","LINDGE.UI-Client.Control.Combobox","LINDGE.UI-Client.Control.TopbarClient"]),angular.module("LINDGE.UI-Client.Control.CardSelect",[]).directive("luiCardSelect",[function(){return{priority:1,scope:{ngDisabled:"="},controller:"$luiSingleSelectionDirectiveCtrl",require:["luiCardSelect","?ngModel"],restrict:"E",replace:!1,link:function(e,t,i,n){var r=n[0],l=n[1];l&&r.bindNgModelCtrl(l)}}}]).directive("luiCardSelectItem",["$animate",function(e){var t=angular.element('<div class="select-mark"><i class="lic lic-check"></i></div>');return{priority:1,scope:{value:"=",ngDisabled:"="},require:"^luiCardSelect",template:'<div class="lui-card-item-wrapper" ng-transclude></div>',restrict:"E",replace:!1,transclude:!0,link:function(i,n,r,l){function o(e){e?n.attr("disabled",!0):n.removeAttr("disabled")}if(e.enabled(n,!1),l){n.append(t.clone());var c={getValue:function(){return i.value},sync:function(e){return this.isEqual(e)?(this.select(),!0):(this.deselect(),!1)},isEqual:function(e){return i.value==e},select:function(){n.addClass("selected")},deselect:function(){n.removeClass("selected")},setDisabled:function(e){e?o(!0):i.ngDisabled||o(!1)},isDisabled:function(){return i.ngDisabled||l.isDisabled()}};l.registerItem(c),n.bind("click",function(e){l.onItemSelectChange(c,!0)}),i.$on("$destroy",function(){l.deregisterItem(c)}),i.$watch("ngDisabled",function(e){o(e)})}}}}]),angular.module("LINDGE.UI-Client.Control.Combobox",[]).directive("luiCombobox",[function(){return{priority:1,scope:{ngDisabled:"="},controller:"$luiSingleSelectionDirectiveCtrl",require:["luiCombobox","?ngModel"],restrict:"E",replace:!1,link:function(e,t,i,n){var r=n[0],l=n[1];l&&r.bindNgModelCtrl(l)}}}]).directive("luiComboboxBtn",[function(){return{priority:1,scope:{value:"=",text:"@"},require:"^luiCombobox",restrict:"E",template:'<button class="lui-combo-btn">{{text}}</button>',replace:!1,link:function(e,t,i,n){var r=angular.element(t[0].querySelector(".lui-combo-btn"));if(n){var l={getValue:function(){return e.value},sync:function(e){return this.isEqual(e)?(this.select(),!0):(this.deselect(),!1)},isEqual:function(t){return e.value==t},select:function(){t.addClass("actived")},deselect:function(){t.removeClass("actived")},setDisabled:function(e){},isDisabled:function(){return!1}};n.registerItem(l),e.$on("$destroy",function(){n.deregisterItem(l)}),r.bind("click",function(e){n.onItemSelectChange(l,!0)})}}}}]),angular.module("LINDGE.UI-Client.Control.TopbarClient",[]).service("$luiTopbarClientActions",[function(){var e={};this.ITEM_POSITIONS={LEFT:"left",RIGHT:"right"},this.registerAction=function(t,i){if("string"==typeof t&&t.length>0)return e[t]=i,this;throw new Error("invalid name")},this.getAction=function(t){return e[t]||null}}]).controller("$luiTopbarClientCtrl",["$scope","$element","$attrs",function(e,t,i){function n(){return(new Date).getTime()}function r(e,t){this.start=n(),this.remain=e,this.callback=t,this._discard=!1}r.prototype.discard=function(){this._discard=!0},r.prototype.isDiscard=function(){return this._discard};var l=0,o=!1,c=-1,a=-1,s=[];function u(){clearTimeout(l),l=0}function d(e,t){c=n(),a=c+e,l=setTimeout(t,e)}function p(){o=!0;try{for(var e=[],t=1/0,i=n()-c,r=0;r<s.length;){var a=s[r];if(!a.isDiscard())if(a.start<=c){var u=a.remain-i;u>0?(a.remain=u,t=Math.min(t,u),e.push(a)):a.callback.call(null)}else t=Math.min(t,a.remain),e.push(a);r++}s=e,t!==1/0?d(t,p):l=0}finally{o=!1}}this.schedule=function(e,t){if("function"!=typeof e)throw new TypeError("callback must be function");if("number"!=typeof t||isNaN(t))throw new TypeError("delay must be number");var i=new r(t=Math.max(t,300),e);return s.push(i),l>0?o||i.remain+i.start<a&&(u(),p()):d(i.remain,p),i},this.stopSchedule=function(){l>0&&(u(),l=0)}}]).directive("luiTopbarClient",[function(){return{priority:1,scope:{},controller:"$luiTopbarClientCtrl",restrict:"E",template:'<div class="lui-topbar-client clearfix" ng-transclude></div>',replace:!0,transclude:!0,link:function(e,t,i,n){"true"==i.homeMode&&(t.addClass("home-mode"),window.addEventListener("scroll",function(){window.scrollY>0?t.addClass("highlight"):t.removeClass("highlight")})),e.$on("$destroy",function(){n.stopSchedule()})}}}]).directive("luiTopbarClientItem",["$luiTopbarClientActions","$mdInkRipple","$luiHref",function(e,t,i){var n="javascript:void(0)";function r(e){return`<div class="lui-topbar-client-item ${e=e||""}"><a href="javascript:void(0)" ng-click="callback($event)" ng-transclude></a></div>`}function l(e,...t){return function(){return e(...t)}}return{priority:1,scope:{hook:"=",icon:"="},require:"^luiTopbarClient",restrict:"E",template:function(t,i){var l,o,c=i.action;if(c){var a=e.getAction(c);return a?(l=a.template,o=Array.isArray(l.clses)?l.clses.join(" "):"",[`<div class="lui-topbar-client-item ${l.position} ${o}">`,`<a href="${n}" ng-click="callback($event)">`,l.icon?`<i class="lic lic-${l.icon}" ng-if="icon!==false"></i>`:"",`<span class="title">${l.title}</span>`,"</a>","</div>"].join("")):r(i.position)}return r(i.position)},replace:!0,transclude:!0,link:function(n,r,o,c){var a=o.href,s=o.action,u=n.hook,d="true"==o.disabled;d?r.addClass("disable"):t.attach(n.$new(!0),r,{center:!1,fitRipple:!0}).color("#9c9c9c");if(!d){angular.isFunction(u)||(u=null);var p=e.getAction(s),f=p&&p.callback||null;!f&&a&&(f=function(){i.goto(a)}),f?(f=l(f,o),n.callback=u?l(u,f):f):u&&(n.callback=l(u))}}}}]).directive("luiTopbarClientTitle",[function(){return{priority:1,scope:{},require:"^luiTopbarClient",restrict:"E",template:'<div class="topbar-text-info lui-topbar-client-item left" ng-transclude></div>',replace:!0,transclude:!0}}]).directive("luiTopbarClientDate",[function(){var e=["周日","周一","周二","周三","周四","周五","周六"];function t(e){return e<10?"0"+e:String(e)}function i(i){var n=i.getMonth()+1,r=i.getDate(),l=e[i.getDay()],o=i.getHours(),c=i.getMinutes(),a=o<=12;return a||(o-=12),`${n}月${r}日 ${l} ${a?"上午":"下午"} ${t(o)}:${t(c)}`}function n(e){var i=e.getHours(),n=e.getMinutes(),r=i<=12;return r||(i-=12),`${r?"上午":"下午"} ${t(i)}:${t(n)}`}return{priority:1,scope:{formatter:"@"},require:"^luiTopbarClient",restrict:"E",template:'<div class="topbar-text-info lui-topbar-client-item right"></div>',replace:!0,transclude:!1,link:function(e,t,r,l){var o="short"==e.formatter?n:i;!function e(i){var n=new Date,r=o(n);t.text(r);var c=i?1e3*i:6e4;l.schedule(e,c)}(60-(new Date).getSeconds())}}}]).directive("luiTopbarClientTimer",[function(){return{priority:1,scope:{initSeconds:"=",countDown:"=",title:"@"},require:"^luiTopbarClient",restrict:"E",template:['<div class="topbar-text-info lui-topbar-client-item right topbar-timer">','<span class="title" ng-bind="title"></span>','<span class="time" ng-bind="$seconds|periodFormatFilter:true"></span>',"</div>"].join(""),replace:!0,transclude:!0,link:function(e,t,i,n){e.$seconds=0;var r=e.countDown?-1:1,l=1e3,o=null;function c(){e.$seconds+=r,e.$seconds<0&&(e.$seconds=0),e.$apply(),o=n.schedule(c,l)}e.$watch("initSeconds",function(t){var i=Number(t);isNaN(i)?e.$seconds=0:e.$seconds=i,o&&o.discard(),o=n.schedule(c,l)})}}}])}();