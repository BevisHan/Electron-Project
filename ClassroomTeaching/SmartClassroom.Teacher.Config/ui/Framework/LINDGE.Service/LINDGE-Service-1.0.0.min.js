!function(){"use strict";const t={},e=[],n=[];function r(n,r){if("string"!=typeof n)throw new TypeError("name must be string");if(0===n.length)throw new Error("name is empty");if(t.hasOwnProperty(n))throw new Error(`module [${n}] is registered`);if("function"!=typeof r)throw new TypeError("callback must be function");var o=function(t,e){return{name:t,callback:e,cached:!1,cache:null}}(n,r);e.push(o),t[n]=o}function o(t){if(!t.cached){var e;n.push(t.name);try{e=t.callback.call(null)}finally{n.pop()}t.cache=null==e?null:e,t.cached=!0}}function i(e){var r=n.indexOf(e);if(r>=0){var i=n.slice(r);i.push(e);var a=i.join(" -> ");throw new Error(`cycle depencency detected: ${a}`)}var s=t[e];if(s)return s.cached?s.cache:(o(s),s.cache);throw new Error(`fail to find module [${e}]`)}r("SDK.Angular",function(){return{hasModule:function(t){try{return window.angular.module(t),!0}catch(t){return!1}}}}),r("SDK.DOM",function(){var t;function e(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t)[e]:t.style[e]}function n(t){var e=t.getBoundingClientRect();return{width:e.width||t.offsetWidth,height:e.height||t.offsetHeight,top:e.top+(window.pageYOffset||document.documentElement.scrollTop),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft)}}function r(t){function r(t){return"static"===(e(t,"position")||"static")}var o=n(t),i={top:0,left:0},a=function(t){for(var e=t.offsetParent||document;e&&e!==document&&r(e);)e=e.offsetParent;return e||document}(t);a!==document&&((i=n(a)).top+=a.clientTop-a.scrollTop,i.left+=a.clientLeft-a.scrollLeft);var s=t.getBoundingClientRect();return{width:s.width||t.offsetWidth,height:s.height||t.offsetHeight,top:o.top-i.top,left:o.left-i.left}}return t=angular.isFunction(document.body.contains)?function(t,e){return t.contains(e)}:function(t,e){for(var n=e.parentElement;;){if(!n)return!1;if(n===document.body)return t===document.body;if(n===t)return!0;n=n.parentElement}},{getElementXCoord:function t(e,n){switch(e.offsetParent){case window.document.body:case n:case null:case void 0:return e.offsetLeft;default:return e.offsetLeft+t(e.offsetParent,n)}},getElementYCoord:function t(e,n){switch(e.offsetParent){case window.document.body:case n:case null:case void 0:return e.offsetTop;default:return e.offsetTop+t(e.offsetParent,n)}},getElementXYCoord:function t(e,n){switch(e.offsetParent){case window.document.body:case n:case null:case void 0:return[e.offsetLeft,e.offsetTop];default:var r=t(e.offsetParent,n);return[e.offsetLeft+r[0],e.offsetTop+r[1]]}},contains:function(e,n){return e===window||t(e,n)},getScrollParent:function t(e){return null===e?null:e.scrollHeight>e.clientHeight?e:t(e.parentNode)},isTextNode:function(t){return 3===t.nodeType},isElementNode:function(t){return 1===t.nodeType},walkDOM:function(t,e,n){if("function"!=typeof e)throw new TypeError("Callback must be function");if(!n||n<0)n=1/0;else if(isNaN(n))throw new TypeError("invalid maxDepth");for(var r=0;r<t.length;r++)for(var o=[{node:t[r],depth:0}],i=!0;o.length>0&&i;){var a=o.shift();if((i=e(a.node))&&a.depth<n){for(var s=[],u=a.node.childNodes,c=0;c<u.length;c++)s.push({node:u[c],depth:a.depth+1});o.unshift.apply(o,s)}}},getComputedStyle:e,getElementOffset:n,getElementPosition:r,getElementRelativePosition:function(t,e,o,i){var a,s,u,c,f=o.split("-"),l=f[0],h=f[1]||"center";a=i?n(t):r(t),s=e.offsetWidth,u=e.offsetHeight;var p={center:function(){return a.left+a.width/2-s/2},left:function(){return a.left},right:function(){return a.left+a.width}},d={center:function(){return a.top+a.height/2-u/2},top:function(){return a.top},bottom:function(){return a.top+a.height}};switch(l){case"right":c={top:d[h](),left:p[l]()};break;case"left":c={top:d[h](),left:a.left-s};break;case"bottom":c={top:d[l](),left:p[h]()};break;default:c={top:a.top-u,left:p[h]()}}return c}}}),r("SDK.ExecutionQueue",function(){function t(){this._tasks=[],this.finishHandles=[],this.finished=0}function e(e,n){if(e=Number(e),isNaN(e)||e<1)throw new Error("Invalid size");this._size=e,arguments.length>1?this._autoStart=!!n:this._autoStart=!1,this._waiting=0,this._actived=0,this._aborted=!1,this._hangOnEmpty=!1,this._taskBlocks=[new t],this._tasks=this._taskBlocks[0],this._taskPtr=-1,this.error=null,this.data=null,this._finalHandlers=[]}return t.prototype={add:function(t){this._tasks.push(t)},get:function(t){return this._tasks[t]},length:function(){return this._tasks.length},isFinished:function(){return this._tasks.length==this.finished}},e.prototype={_isStateNormal:function(){return!this._aborted},_getDefer:function(t){return t.flag=!0,e=function(e){if(this._actived--,this._tasks.finished++,e)this.abort(e);else{var n=Array.prototype.slice.call(arguments,1);if(t.result=n,this.data=n,this._isStateNormal())if(this._tasks.isFinished()){for(var r=0;r<this._tasks.finishHandles.length;r++)try{this._tasks.finishHandles[r].call(null)}catch(t){}this._waiting>0?(this._tasks=this._taskBlocks[t.block+1],this._taskPtr=-1,this.start()):0===this._actived&&(this._hangOnEmpty||this._finish())}else this.start()}},n=0,r=this,o=Number(n),(isNaN(o)||n<=0)&&(o=5),function(){var t=[r?e.bind(r):e,o];return t.push.apply(t,arguments),setTimeout.apply(null,t)};var e,n,r,o},hangWhenEmpty:function(){return this._hangOnEmpty=!0,this},addTask:function(t){if("function"!=typeof t)throw new TypeError("Callback must be function");var e=Array.prototype.slice.call(arguments,1),n=function(t,e){return{callback:t,params:e,flag:!1,rInfo:null,result:null,block:0}}(t,e),r=this._taskBlocks.length-1;return n.block=r,e.push(this._getDefer(n)),this._taskBlocks[r].add(n),this._waiting++,this._autoStart&&this.start(),this},await:function(e){if(this._tasks.length()>0){var n=new t;"function"==typeof e&&n.finishHandles.push(e),this._taskBlocks.push(n)}return this},_callFinally:function(){for(var t=this._finalHandlers,e=0;e<t.length;e++)t[e]()},finally:function(t){if("function"!=typeof t)throw new TypeError("Callback must be function");return this._finalHandlers.push(t),this},start:function(){if(this._isStateNormal())try{for(;this._waiting>0&&this._actived<this._size&&this._taskPtr<this._tasks.length()-1;){this._taskPtr++;var t=this._tasks.get(this._taskPtr);this._waiting--,this._actived++;var e=t.callback.apply(null,t.params);!t.flag&&angular.isObject(e)&&(t.rInfo=e)}}catch(t){this.abort(t)}},_finish:function(){this._callFinally()},abort:function(t){if(this._isStateNormal()){this._aborted=!0,this.error=t,this._waiting=-1,this._actived=-1,this.data=null;for(var e=this._tasks,n=this._taskPtr;n>=0;){var r=e.get(n);if(!r.flag){var o=r.rInfo;if(o&&"function"==typeof o.abort)try{o.abort()}catch(t){}}n--}this._taskPtr=-1,this._callFinally()}},isAborted:function(){return this._aborted}},{ExecutionQueue:e}}),r("SDK.Lang.Flags",function(){function t(){this.__names=[],this.__default=0}function e(){}return t.prototype.define=function(t,e){if(!Object.isFrozen||!Object.isFrozen(this)){if("string"!=typeof t)throw new TypeError("name must be string");if(""===t)throw new Error("name is empty");if(this.hasOwnProperty(t)||t.startsWith("__"))throw new Error("invalid names");if("number"!=typeof e)throw new TypeError("value must be number");this._checkFlagValue(e),this[t]=e,this.__names.push(t)}},t.prototype._findValueByName=function(t){if(this.__names.indexOf(t)>=0)return this[t];throw new Error("flag not found: "+t)},t.prototype._checkFlagValue=function(t){if(t<0)throw new Error("flag value must be unsigned number")},t.prototype.getFlagNames=function(){return this.__names.slice(0)},t.prototype.getFlagValue=function(t){return this._findValueByName(t)},t.prototype.getFlagNameByValue=function(t){for(var e=0;e<this.__names.length;e++){var n=this.__names[e];if(this[n]==t)return this[n]}return""},t.prototype.hasFlag=function(t,e){if("string"==typeof e)return(this._findValueByName()&t)>0;if("number"==typeof e)return e>0&&(t&e)>0;throw new TypeError("invalid nameOrValue")},t.prototype.hasFlags=function(t){if(arguments.length<=1)return!1;for(var e=1;e<arguments.length;e++)if(!this.hasFlag(t,arguments[e]))return!1;return!0},t.prototype.hasAnyFlag=function(t){if(arguments.length<=1)return!1;for(var e=1;e<arguments.length;e++)if(this.hasFlag(t,arguments[e]))return!0;return!1},t.prototype.setFlag=function(t,e){var n;if("string"==typeof nemeOrValue)n=this._findValueByName(e);else{if("number"!=typeof e)throw new TypeError("invalid nameOrValue");this._checkFlagValue(e),n=e}return t|n},t.prototype.unsetFlag=function(t,e){var n;if("string"==typeof nemeOrValue)n=this._findValueByName(e);else{if("number"!=typeof e)throw new TypeError("invalid nameOrValue");this._checkFlagValue(e),n=e}return t^n},t.prototype.default=function(){return this.__default},e.prototype.create=function(e){for(var n=new t,r=1,o=0;o<e.length;o++){var i=e[o];n.define(i,r),r*=2}return Object.freeze&&Object.freeze(n),n},{__access__:"private",flagBuilder:new e}}),r("SDK.Lang",function(){function t(t){if(null==t)return!0;switch(typeof t){case"string":case"number":case"boolean":return!0;default:return!1}}function e(t){return"number"==typeof t&&isNaN(t)}function n(t){return t instanceof Date}function r(o,i){return o===i||(!(!e(o)||!e(i))||(n(o)?!!n(i)&&o.getTime()==i.getTime():!t(o)&&!t(i)&&(Array.isArray(o)?function(t,e){if(Array.isArray(e)){if(t.length===e.length){for(var n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}return!1}return!1}(o,i):function(t,e){if(Array.isArray(e))return!1;var n=Object.keys(t),o=Object.keys(e);if(n.length===o.length){for(var i=0;i<n.length;i++){var a=[n[i]];if(!r(t[a],e[a]))return!1}return!0}return!1}(o,i))))}function o(t){for(var e=[];t--;)e.push(Math.floor(16*Math.random()).toString(16));return e.join("")}var a=/\{\s*([a-zA-Z0-9_\-]+)\s*\}/g;function s(t,e,n){return t.replace(a,function(t,r){var o=n(e,r);return null==o?"":String(o)})}return{inherits:function(t,e){var n=e.prototype||Object.prototype,r=Object.create(n);return t.prototype=r,t},deepCompare:r,diffObject:function(t,e){if("object"!=typeof t||"object"!=typeof e)throw new TypeError("`ref` and `obj` must be Object");if(t===e)return null;var n={},o=!1;return Object.keys(e).forEach(function(i){t.hasOwnProperty(i)&&r(t[i],e[i])||(n[i]=e[i],o=!0)}),o?n:null},generateUIDFake:function(t,e){switch(t){case"uuid":return[8,4,4,12].map(o).join("-");case"":case"normal":return void 0===e&&(e=10),o(e);default:throw new Error("invalid format "+t)}},formatString:function(t){if("string"!=typeof t)throw new TypeError("pattern must be string");return s(t,arguments,function(t,e){var n=Number(e);return isNaN(n)?null:t[n+1]})},formatStringByMap:function(t,e){if("string"!=typeof t)throw new TypeError("pattern must be string");if(!e)throw new Error("map is null");return s(t,e,function(t,e){return t[e]})},isValidDate:function(t){return!!(t&&t instanceof Date)&&!isNaN(t.getTime())},flagBuilder:i("SDK.Lang.Flags").flagBuilder}}),r("SDK.Math",function(){return{isNumber:function(t){return"number"==typeof t},closeEnough:function(t,e,n){var r=Math.pow(10,arguments.length>2?-n:-6);return Math.abs(t-e)<=r},fraction:function(t){if(t=Number(t),isNaN(t))throw new TypeError("fraction only supports number");return t-(t>=0?Math.floor(t):Math.ceil(t))},clamp:function(t,e,n){return n<t?t:n>e?e:n},safeToNumber:function(t){var e=Number(t);return isNaN(e)?0:e}}}),r("SDK.StateMachine",function(){function t(t){t.stack?window.console.error(t.stack):window.console.trace?window.console.trace():window.console.error(t)}function e(t,e){this.name=t,this.events={},this._checker=e||null}function n(){this._states={},this._connections={},this._actions={},this._currentState=null,this._disposed=!1}return e.prototype.addEventHandle=function(t,e){var n=this.events[t];n||(n=[],this.events[t]=n),n.push(e)},e.prototype.triggerEvent=function(t,...e){var n=this.events[t];if(n)for(var r=0;r<n.length;r++)n[r].apply(null,e)},e.prototype.check=function(){return!this._checker||this._checker.call(null)},n.prototype._findState=function(t){return this._states.hasOwnProperty(t)?this._states[t]:null},n.prototype._ensureInitialized=function(){if(!this._currentState)throw new Error("state machine is not initialized")},n.prototype._ensureNotDisposed=function(){if(this._disposed)throw new Error("state machine has been disposed")},n.prototype.registerState=function(t,n,r){if("string"!=typeof t)throw new TypeError("state name must be string");if(""===(t=t.trim()))throw new Error("state name is empty");if(this._states.hasOwnProperty(t))throw new Error(`state [${t}] already exists`);var o=new e(t,r);return this._states[t]=o,n&&(this._currentState=o),this},n.prototype.setState=function(t){this._ensureNotDisposed();var e=this._findState(t);if(e)return this._currentState=e,this;throw new Error(`cannot find state [${t}]`)},n.prototype.removeState=function(t){var e=this._findState(t);if(e){var n=this._connections;return delete n[t],Object.keys(n.forEach(e=>{n[e].delete(t)})),this._currentState===e&&(this._currentState=null),this}throw new Error(`cannot find state [${t}]`)},n.prototype._hasConnection=function(t,e){var n=this._connections[t];return!!n&&n.has(e)},n.prototype.addConnection=function(t,e,n){var r=this._connections,o=r[t];return o||(o=new Set,r[t]=o),o.add(e),n&&this.addConnection(e,t,!1),this},n.prototype.registerAction=function(t,e){if("string"!=typeof t)throw new TypeError("state actionName must be string");if(""===(t=t.trim()))throw new Error("state actionName is empty");if(!e)throw new Error("action is null");var n=this._actions[t];return n||(n=[],this._actions[t]=n),n.push(e),this},n.prototype.registerStateEvent=function(t,e,n){if("function"!=typeof n)throw new TypeError("callback must be function");var r=this._findState(t);if(!r)throw new Error(`cannot find state [${t}]`);return r.addEventHandle(e,n),this},n.prototype.registerStateEvents=function(t,e){if(!e)throw new Error("events is null");var n=this._findState(t);if(!n)throw new Error(`cannot find state [${t}]`);return Object.keys(e).forEach(t=>{var r=e[t];if(null!=r){if("function"!=typeof r)throw new TypeError(`invalid callback function for event [${t}]`);n.addEventHandle(t,r)}}),this},n.prototype.execAction=function(e){this._ensureInitialized(),this._ensureNotDisposed();var n=this._currentState.name,r=this._actions[e];if(!r)throw new Error(`action [${e}] is not exists`);for(var o=0;o<r.length;o++){var i=r[o],a=i[n];try{if(a)a();else{var s=i._default;s&&s()}}catch(e){t()}}},n.prototype.transitTo=function(e,n,r){this._ensureInitialized(),this._ensureNotDisposed();var o=this._currentState,i=this._findState(e);if(o!==i){var a=null;if(i)if(this._hasConnection(o.name,e)&&i.check()){try{o.triggerEvent("leave",e)}catch(e){t(e)}var s=this._currentState;this._currentState=i;try{i.triggerEvent("enter",s.name)}catch(e){t(e)}n&&n()}else{if(a=new Error(`transition ${o.name} -> ${e} cannot be performanced`),!r)throw a;r(a)}else{if(a=new Error(`destination state [${e}] is not exists`),!r)throw a;r(a)}}else n&&n()},n.prototype.currentState=function(){return this._currentState?this._currentState.name:""},n.prototype.dispose=function(){this._disposed||(this._disposed=!0)},{StateMachine:n}}),r("SDK.Unit",function(){const t=i("SDK.Lang");function e(t,e){if(t){if(t=Number(t),isNaN(t))throw new TypeError("Value must be number");this._value=t}else this._value=0;if("string"!=typeof e)throw new TypeError("type must be string");this._type=e}e.prototype.toString=function(){return""},e.prototype.fromString=function(t){},e.prototype.convertTo=function(t){return null},e.prototype.getValue=function(){return this._value};const n=["b","kb","mb","gb","tb"],r=/^\s*(\d+)\s*(b|kb|mb|gb|tb)?\s*$/i;function o(t,n){e.call(this,t,n),this._typeIdx=this._getTypeIndex(n)}return t.inherits(o,e),o.prototype._getTypeIndex=function(t){var e=n.indexOf(t);if(e>=0)return e;throw new Error("Unsupported type: "+t)},o.prototype.convertTo=function(t){var e,n=this._getTypeIndex(t);if(n>this._typeIdx)for(e=this._typeIdx;e<n;e++)this._value/=1024;else if(n<this._typeIdx)for(e=this._typeIdx;e>n;e--)this._value*=1024;this._typeIdx=n,this._type=t},o.prototype.toString=function(t){var e;if(arguments.length>0)if(t>0){var n=Math.floor(this._value),r=String(Math.abs(this._value-n)).replace(/^0?\./,"");r=r.substr(0,t).replace(/0*$/,""),e=Number(r)>0?[n,r].join("."):n}else e=String(Math.round(this._value));else e=String(this._value);return[e,this._type.toUpperCase()].join("")},o.prototype.fromString=function(t){if(0===(t=t.trim().toLowerCase()).length)throw new Error("Cannot convert from empty string");var e=r.exec(t);if(!e)throw new Error("Cannot recognize: "+t);var o=e[1],i=e[2]||n[0];if(i===this._type)this._value=o;else{var a,s;if((a=i===n[0]?0:this._getTypeIndex(i))>this._typeIdx)for(s=this._typeIdx;s<a;s++)o*=1024;else for(s=this._typeIdx;s>a;s--)o/=1024;this._value=o}},{ByteUnit:o}}),function(){function t(){}t.prototype.getNamespace=function(t){for(var e=t.split("."),n=this,r=[],o=0;o<e.length;o++){var i=e[o].trim();if(n.hasOwnProperty(i)?n=n[i]:(n[i]={},n=n[i]),r.push(i),"object"!=typeof n)throw new Error(r.join(".")+" is not a namespace")}return n},function(){n.length=0;for(let t of e)o(t)}();var r=new t;e.map(t=>t.name).forEach(function(t){try{var e=i(t);if(!function(t){return Boolean("private"==t.__access__)}(e)){t.startsWith("SDK.")&&(t=t.substr(4));var n=r.getNamespace(t);Object.keys(e).forEach(function(t){t.startsWith("__")||(n[t]=e[t])})}}catch(e){window.console.error(`module [${t}] loading failed:\n${e}`)}}),window.$SDK=r}(),angular.module("LINDGE.Service.SDK",[]).constant("$SDK",window.$SDK),angular.module("LINDGE-Service",["LINDGE.Service.Animation","LINDGE.Service.BrowserEnv","LINDGE.Service.Cache","LINDGE.Service.Communication","LINDGE.Service.EventEmitter","LINDGE.Service.ExecutionQueue","LINDGE.Service.Href","LINDGE.Service.ModuleManager","LINDGE.Service.LocalStorage","LINDGE.Service.Params","LINDGE.Service.Path","LINDGE.Service.TimingQueue","LINDGE.Service.StateMachine","LINDGE.Service.Transition","LINDGE.Service.SDK"]),angular.module("LINDGE.Service.Animation",[]).service("$luiAnimation",[function(){var t=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame).bind(window),e=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame).bind(window);window.requestAnimationFrame?(this.frameTick=t,this.cancelFrame=e):(this.frameTick=function(t){return setTimeout(t,17)},this.cancelFrame=function(t){return clearTimeout(t)})}]),angular.module("LINDGE.Service.BrowserEnv",[]).factory("browserEnv",[function(){var t={IE:"IE",Edge:"Edge",Chrome:"Chrome",Firefox:"Firefox",Safari:"Safari"},e={WINDOWS:"Windows",MACOS:"Mac",UNIX:"Unix",LINUX:"Linux",UNKNOWN:"Unknown"},n=["Mozilla",".NET","Chrome","WebKit","Safari"],r=["x86_64","x86-64","Win64","x64;","amd64","AMD64","WOW64","x64_64","ia64","sparc64","ppc64","IRIX64"],o="x32",i="x64";for(var a,s=window.navigator.userAgent,u=window.navigator.vendor,c={browserType:"Unknown",browserVersion:"Unknown",operatingSystem:(a=window.navigator.appVersion).indexOf("Win")>=0?e.WINDOWS:a.indexOf("Mac")>=0?e.MACOS:a.indexOf("X11")>=0?e.UNIX:a.indexOf("Linux")>=0?e.LINUX:e.UNKNOWN,kernels:function(t){return n.filter(function(e){return t.indexOf(e)>=0})}(s),architucture:function(t){return r.some(function(e){return t.indexOf(e)>=0})?i:o}(s),language:window.navigator.language},f=[function(e){var n=e.indexOf("MSIE");if(n>=0)return[!0,e.substr(n+5,4).replace(/[; ]/g,""),t.IE];if(e.indexOf("Trident")>=0){var r=e.indexOf("rv:");return r>=0&&"11"==e.substr(r+3,2)?[!0,"11.0",t.IE]:[!0,null,t.IE]}return[!1]},function(e){if(e.indexOf("Edge/")>=0){var n=/Edge\/([0-9.]+)/.exec(e);return n?[!0,n[1],t.Edge]:[!0,null,t.Edge]}return[!1]},function(e,n){if(/Google Inc/.test(n)){var r=/Chrome\/([0-9.a-z]+)/i.exec(e);return r?[!0,r[1],t.Chrome]:[!0,null,t.Chrome]}return[!1]},function(e,n){var r=/Safari\/([0-9.a-z]+)/i.exec(e);return r?[!0,r[1],t.Safari]:[!1]},function(e){if(e.indexOf("Firefox/")>=0){var n=/Firefox\/([0-9.a-z]+)/i.exec(e);return n?[!0,n[1],t.Firefox]:[!0,null,t.Firefox]}return[!1]}],l=0;l<f.length;l++){var h=f[l](s,u);if(h[0])return angular.extend(c,{browserType:h[2],browserVersion:h[1]}),c}return c}]),angular.module("LINDGE.Service.Cache",["LINDGE.Service.SDK","LINDGE.Service.Animation"]).service("$luiCache",["$SDK","$luiAnimation",function(t,e){function n(){}n.prototype.get=function(){throw new Error("get is not supported")},n.prototype.batchGet=function(){throw new Error("batch get is not supported")},n.prototype.getRef=function(){throw new Error("get ref is not supported")},n.prototype.batchGetRef=function(){throw new Error("batch get ref is not supported")},n.prototype.set=function(){throw new Error("set is not supported")},n.prototype.batchSet=function(){throw new Error("batch set is not supported")},n.prototype.setRef=function(){throw new Error("set ref is not supported")},n.prototype.batchSetRef=function(){throw new Error("batch set ref is not supported")},n.prototype.remove=function(){throw new Error("remove is not supported")},n.prototype.clear=function(){throw new Error("clear is not supported")},n.prototype.contains=function(){throw new Error("contains is not supported")},n.prototype.onSetCache=function(){throw new Error("onSetCache is not supported")},n.prototype.onRemoveCache=function(){throw new Error("onRemoveCache is not supported")};var r=e.frameTick;function o(){n.call(this),this._storage={},this._evtHandlers={set:[],remove:[]}}t.Lang.inherits(o,n),o.prototype.get=function(t){if(this._storage.hasOwnProperty(t)){var e=this._storage[t];return angular.isObject(e)||angular.isArray(e)?angular.copy(e):e}return null},o.prototype.batchGet=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];e[r]=this.get(r)}return e},o.prototype.getRef=function(t){return this._storage.hasOwnProperty(t)?this._storage[t]:null},o.prototype.getUnsafe=o.prototype.getRef,o.prototype.batchGetRef=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];e[r]=this.getRef(r)}return e},o.prototype._triggerSetEvt=function(t,e){this._evtHandlers.set.forEach(function(n){n[0]===t&&r(function(){n[1](e)})})},o.prototype.set=function(t,e){(angular.isObject(e)||angular.isArray(e))&&(e=angular.copy(e)),this._storage[t]=e,this._triggerSetEvt(t,e)},o.prototype.batchSet=function(t){for(var e=0;e<t.length;e++){var n=t[e];this.set(n[0],n[1])}},o.prototype.setRef=function(t,e){this._storage[t]=e,this._triggerSetEvt(t,e)},o.prototype.setUnsafe=o.prototype.setRef,o.prototype.batchSetRef=function(t){for(var e=0;e<t.length;e++){var n=t[e];this.setRef(n[0],n[1])}},o.prototype.remove=function(){for(var t=0;t<arguments.length;t++)delete this._storage[arguments[t]]},o.prototype.clear=function(){for(var t=Object.keys(this._storage),e=0;e<t.length;e++)delete this._storage[t[e]]},o.prototype.contains=function(t){return this._storage.hasOwnProperty(t)},o.prototype._createEvtCancelHandler=function(t,e){var n=this._evtHandlers[t];return function(){for(var t=0;t<n.length;t++)if(n[t][1]===e)return void n.splice(t,1)}},o.prototype.onSetCache=function(t,e,n){if("function"==typeof e){var o=this._createEvtCancelHandler("set",e);if(this._evtHandlers.set.push([t,e]),n&&this.contains(t)){var i=this._storage[t];r(function(){e(i)})}return o}throw new TypeError("Handler must be function")},o.prototype.toString=function(){return"<cache: KeyValue>"};var i=["create","$types"];return{$types:{KEY_VALUE:1},create:function(t,e,n){if(t){if(i.indexOf(t)>=0)throw new Error("Cannot use cache name `"+t+"`");if(n||!this.hasOwnProperty(t))switch(e){case this.$types.KEY_VALUE:this[t]=new o}return this[t]}throw new Error("Cache name is empty")}}}]),angular.module("LINDGE.Service.Communication",["LINDGE.Service.LocalStorage"]).service("$luiPageNotification",["localStorageService","$SDK",function(t,e){var n={},r="comm.";function o(e){return t.deriveKey(r+e)}function i(t){return r+t}return window.addEventListener("storage",function(e){var r=e.key,o=e.url,i=n[r];if(i){var a=t.get(i.userKey);i.handler(function(t,e){return{value:t.value,url:e}}(a,o))}}),window.addEventListener("beforeunload",function(){angular.forEach(n,function(e,n){t.remove(e.userKey)}),n={}}),t.isSupported?{watch:function(t,e){if("function"!=typeof e)throw new TypeError("Handler must be function");var r=o(t);n[r]={handler:e,userKey:i(t)}},unwatch:function(e){var r=o(e);delete n[r],t.remove(i(e))},notify:function(n,r,o){void 0===r&&(r=null);var a,s,u=o?(a=(new Date).getTime(),s=e.Lang.generateUIDFake("normal"),String(a)+"_"+s):"";t.set(i(n),function(t,e){var n={value:t};return e&&(n._fp=e),n}(r,u))}}:{watch:angular.noop,unwatch:angular.noop,notify:angular.noop}}]),angular.module("LINDGE.Service.EventEmitter",["LINDGE.Service.Animation"]).factory("EventEmitter",["$luiAnimation",function(t){var e=t.frameTick;function n(t,n,r){if("function"==typeof t)e(function(){t.apply(r||null,n)});else{if(!Array.isArray(t))throw new ReferenceError("Invalid callbacks");t.forEach(function(t){e(function(){t.apply(r||null,n)})})}}function r(){this._events={}}return r.prototype._dispatchEvent=function(t){for(var e=Array.prototype.slice.call(arguments,1),r=Array.isArray(t)?t:[t],o=this._events,i=0;i<r.length;i++){var a=r[i];o.hasOwnProperty(a)&&o[a].length&&n(o[a],e)}},r.prototype.addEventListener=function(t,e){if(!("string"==typeof t&&t.length>0))throw new TypeError("Invalid event name");if("function"!=typeof e)throw new TypeError("Invalid event listener");this._events.hasOwnProperty(t)?this._events[t].push(e):this._events[t]=[e]},r.prototype.on=function(t,e){return this.addEventListener(t,e),this},r.prototype.removeEventListener=function(t,e){if(!("string"==typeof t&&t.length>0))throw new TypeError("Invalid event name");if("function"!=typeof e){if(null==e)return this._events[t].length=0,!0;throw new TypeError("Invalid event listener")}if(this._events.hasOwnProperty(t)){var n=this._events[t].indexOf(e);return n>=0&&(this._events[t].splice(n,1),!0)}},r}]),angular.module("LINDGE.Service.ExecutionQueue",["LINDGE.Service.SDK"]).service("ExecutionQueue",["$SDK",function(t){var e=t.ExecutionQueue.ExecutionQueue;this.create=function(t,n,r){var o;return arguments.length>1?(o=new e(t,n),r&&o.hangWhenEmpty()):o=new e(t),o},this.Queue=e}]),angular.module("LINDGE.Service.Href",["LINDGE.Service.Params","LINDGE.Service.Path","Figure-Config-RouteTable"]).provider("$luiHref",function(){var t=[];function e(e,n,r){this.composeUrl=function(e,r,o,i){var a={};(arguments.length<4||i)&&t.forEach(function(t){a[t]=n.get(t)}),angular.forEach(r,function(t,e){a[e]=null==e?"":t});var s=Object.keys(a).map(function(t){return[encodeURIComponent(t),encodeURIComponent(a[t])].join("=")}).join("&");return s.length>0&&(s="?"+s),[e,s,o?"#"+o:""].join("")},this.composeRedirectUrl=function(t,e,n){var o=/^(?:entrance\.)?(.+)$/i;var i=function(t){var e=o.exec(t);return e?e[1]:null}(t);if(i){var a=this.composeUrl(i,e,n),s=window.encodeURIComponent(a);return r+"?entrance="+s}return""},this.goto=function(t,n,r,o){var i=this.composeUrl(t,n,r);o?(e.open(i,"_blank"),e.focus()):e.location.href=i},this.redirectTo=function(t,n,r,o){var i=this.composeRedirectUrl(t,n,r);o?(e.open(i,"_blank"),e.focus()):e.location.href=i}}this.setDefaultInheriteParams=function(e){if(Array.isArray(e)){var n=e.map(function(t){return String(t)});t.push.apply(t,n)}},this.$get=["$window","queryString","routeTable","path",function(t,n,r,o){return new e(t,n,o.combine(r.figure_config,"Redirect"))}]}).filter("luiHrefFilter",["$luiHref",function(t){return function(e,n,r){return t.composeUrl(e,n,r)}}]).filter("entranceFilter",["$luiHref",function(t){return function(e,n,r){return t.composeRedirectUrl(e,n,r)}}]),angular.module("LINDGE.Service.ModuleManager",[]).provider("$moduleManager",function(){var t={UNKNOWN:"unknown",SCRIPT:"script",STYLE:"style"},e={NORMAL:10,HIGH:20,LOW:5};function n(){this.id="",this.name="",this.components=[]}function r(){this.id="",this.name="",this.path="",this.loaded=!1,this.type=t.UNKNOWN,this.scopeChecker=null,this.downloadParams={crossorigin:!1,priority:e.NORMAL,trivial:!1}}n.prototype.isLoaded=function(){return this.components.every(function(t){return t.loaded||t.checkScope()})},r.prototype.checkScope=function(){return!!this.scopeChecker&&this.scopeChecker.call(null)};var o={};var i={},a=/\.(\w+)$/;function s(e){var n=a.exec(e);if(!n)return t.UNKNOWN;switch(n[1]){case"css":return t.STYLE;case"js":return t.SCRIPT;default:return t.UNKNOWN}}function u(t){return i[t]||null}this.COMPONENT_TYPE=t,this.COMPONENT_PRIORITY=e,this.defineModule=function(e){if("object"!=typeof e)throw new TypeError("invalid module definition");!function(e){if(!e.id)throw new Error("missing module id");if(!Array.isArray(e.components))throw new TypeError("components must be array");var o=new n;o.id=e.id,o.name=e.name?e.name:o.id,e.components.forEach(function(e,n){var i=new r;if(!e.id)throw new Error("missing component id, index "+n);i.id=e.id,i.name=e.name?e.name:i.id,i.path=e.path||"",e.type&&e.type!==t.UNKNOWN?i.type=e.type:i.path?i.type=s(i.path):i.type=t.UNKNOWN,i.scopeChecker=e.scopeChecker||null,e.downloadParams&&angular.extend(i.downloadParams,e.downloadParams),o.components.push(i)}),i[o.id]=o}(e)},this.$get=["$q","$log",function(e,n){var i={style:function(t){var r=document.getElementsByTagName("head")[0],o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=t.path;var i=e.defer();return o.onload=function(){i.resolve()},o.onerror=function(e){i.reject(e||null),n.error("error occurred when downloading stylesheet: "+t.path)},r.appendChild(o),i.promise},script:function(t){var r=document.createElement("script");r.type="text/javascript";var o=e.defer();return r.stateReady?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(r.onreadystatechange=null,o.resolve())}:(r.onload=function(){o.resolve()},r.onerror=function(e){o.reject(e||null),n.error("error occurred when downloading script: "+t.path)}),r.src=t.path,document.body.appendChild(r),o.promise}};function a(t){var e=o[t.path];if(e)return e.isLoaded?(t.loaded=!0,e.handle):e.handle;var n=i[t.type];if(n)return(e={isLoaded:!1,handle:null}).handle=n(t),e.handle.then(function(){e.isLoaded=!0,t.loaded=!0}),o[t.path]=e,e.handle;throw new Error("cannot recognize component type")}function c(t){return!t.loaded&&!t.checkScope()}function f(){var t=e.defer();return t.resolve(),t.promise}return{loadModule:function(t){if("string"!=typeof t)throw new TypeError("invalid module id");if(!(t=t.trim()))throw new Error("module id is empty");var n=u(t);if(n){if(n.isLoaded())return f();var r=[];return n.components.forEach(function(t){if(c(t))try{var e=a(t);t.downloadParams.trivial||r.push(e)}catch(e){if(!t.downloadParams.trivial)throw e}}),e.all(r)}throw new Error("module "+t+" is not registered")},loadComponent:function(t){if("string"!=typeof t)throw new TypeError("invalid component path");var e=t.split("/");if(2!=e.length)throw new Error("invalid component path stucture");var n=function(t,e){var n=u(t);if(n){for(var r=0;r<n.components.length;r++){var o=n.components[r];if(o.id==e)return o}return null}return null}(e[0].trim(),e[1].trim());if(n)return c(n)?a(n):f();throw new Error("component "+t+" is not registered")},loadFile:function(e,n){if("string"!=typeof e)throw new TypeError("invalid file path");if(!(e=e.trim()))throw new Error("filePath is empty");var o=new r;return o.id=e,o.name=e,o.path=e,n&&n!=t.UNKNOWN?o.type=n:o.type=s(e),a(o)},isModuleLoaded:function(t){if("string"!=typeof t)throw new TypeError("invalid module id");var e=u(t);return!!e&&e.isLoaded()}}}]}),function(t,e,n){var r=e.isDefined,o=e.isUndefined,i=e.isNumber,a=e.isObject,s=e.isArray,u=e.extend,c=e.toJson,f=e.fromJson;e.module("LINDGE.Service.LocalStorage",[]).provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(t){return this.prefix=t,this},this.setStorageType=function(t){return this.storageType=t,this},this.setStorageCookie=function(t,e){return this.cookie={expiry:t,path:e},this},this.setStorageCookieDomain=function(t){return this.cookie.domain=t,this},this.setNotify=function(t,e){return this.notify={setItem:t,removeItem:e},this},this.$get=["$rootScope","$window","$document","$parse",function(t,e,n,l){var h,p=this,d=p.prefix,m=p.cookie,g=p.notify,v=p.storageType;n?n[0]&&(n=n[0]):n=document,"."!==d.substr(-1)&&(d=d?d+".":"");var y=function(t){return d+t},w=function(){try{var n=v in e&&null!==e[v],r=y("__"+Math.round(1e7*Math.random()));return n&&((h=e[v]).setItem(r,""),h.removeItem(r)),n}catch(e){return v="cookie",t.$broadcast("LocalStorageModule.notification.error",e.message),!1}}(),_=function(e,n){if(o(n)?n=null:(a(n)||s(n)||i(+n||n))&&(n=c(n)),!w||"cookie"===p.storageType)return w||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),g.setItem&&t.$broadcast("LocalStorageModule.notification.setitem",{key:e,newvalue:n,storageType:"cookie"}),k(e,n);try{(a(n)||s(n))&&(n=c(n)),h&&h.setItem(y(e),n),g.setItem&&t.$broadcast("LocalStorageModule.notification.setitem",{key:e,newvalue:n,storageType:p.storageType})}catch(r){return t.$broadcast("LocalStorageModule.notification.error",r.message),k(e,n)}return!0},E=function(e){if(!w||"cookie"===p.storageType)return w||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),N(e);var n=h?h.getItem(y(e)):null;return n&&"null"!==n?"{"===n.charAt(0)||"["===n.charAt(0)||/^-?\d+\.?\d*$/.test(n.replace(/["']/g,""))?f(n):n:null},S=function(e){if(!w||"cookie"===p.storageType)return w||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),g.removeItem&&t.$broadcast("LocalStorageModule.notification.removeitem",{key:e,storageType:"cookie"}),T(e);try{h.removeItem(y(e)),g.removeItem&&t.$broadcast("LocalStorageModule.notification.removeitem",{key:e,storageType:p.storageType})}catch(n){return t.$broadcast("LocalStorageModule.notification.error",n.message),T(e)}return!0},b=function(){try{return e.navigator.cookieEnabled||"cookie"in n&&(n.cookie.length>0||(n.cookie="test").indexOf.call(n.cookie,"test")>-1)}catch(e){return t.$broadcast("LocalStorageModule.notification.error",e.message),!1}}(),k=function(e,r){if(o(r))return!1;if((s(r)||a(r))&&(r=c(r)),!b)return t.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var i="",u=new Date,f="";if(null===r?(u.setTime(u.getTime()+-864e5),i="; expires="+u.toGMTString(),r=""):0!==m.expiry&&(u.setTime(u.getTime()+24*m.expiry*60*60*1e3),i="; expires="+u.toGMTString()),e){var l="; path="+m.path;m.domain&&(f="; domain="+m.domain),n.cookie=y(e)+"="+encodeURIComponent(r)+i+l+f}}catch(e){return t.$broadcast("LocalStorageModule.notification.error",e.message),!1}return!0},N=function(e){if(!b)return t.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var r=n.cookie&&n.cookie.split(";")||[],o=0;o<r.length;o++){for(var i=r[o];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(y(e)+"=")){var a=decodeURIComponent(i.substring(d.length+e.length+1,i.length));try{var s=JSON.parse(a);return f(s)}catch(t){return a}}}return null},T=function(t){k(t,null)},O=function(){for(var t=null,e=d.length,r=n.cookie.split(";"),o=0;o<r.length;o++){for(t=r[o];" "===t.charAt(0);)t=t.substring(1,t.length);var i=t.substring(e,t.indexOf("="));T(i)}};return{isSupported:w,getStorageType:function(){return v},set:_,add:_,get:E,keys:function(){if(!w)return t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var e=d.length,n=[];for(var r in h)if(r.substr(0,e)===d)try{n.push(r.substr(e))}catch(e){return t.$broadcast("LocalStorageModule.notification.error",e.Description),[]}return n},remove:S,clearAll:function(e){e=e||"";var n=d.slice(0,-1),r=new RegExp(n+"."+e);if(!w||"cookie"===p.storageType)return w||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),O();var o=d.length;for(var i in h)if(r.test(i))try{S(i.substr(o))}catch(e){return t.$broadcast("LocalStorageModule.notification.error",e.message),O()}return!0},bind:function(t,e,n,o){var i=E(o=o||e);return null===i&&r(n)?i=n:a(i)&&a(n)&&(i=u(n,i)),l(e).assign(t,i),t.$watch(e,function(t){_(o,t)},a(t[e]))},deriveKey:y,length:function(){for(var t=0,n=e[v],r=0;r<n.length;r++)0===n.key(r).indexOf(d)&&t++;return t},cookie:{isSupported:b,set:k,add:k,get:N,remove:T,clearAll:O}}}]})}(window,window.angular),angular.module("LINDGE.Service.Params",[]).service("queryString",["$window",function(t){var e,n,r,o={};if(t.location.search.length>0)for(n=t.location.search.substr(1).split("&"),e=0;e<n.length;++e)n[e].indexOf("=")>-1?(r=n[e].split("="),o[r[0]]=r[1],o[r[0].toLowerCase()]=r[1]):o[n[e]]=null;return{get:function(t,e){t=t.toLowerCase();var n=o[t];return void 0===n?"":e?decodeURIComponent(n):n},getAll:function(){return o}}}]),angular.module("LINDGE.Service.Path",[]).service("path",[function(){var t={};return t.combine=function(){return function(t){if(0===t.length)return null;for(var e=[],n=new RegExp("(^\\s*/)|(/\\s*$)","g"),r=0;r<t.length;r++)e.push(t[r]?t[r].replace(n,""):"");var o=e.join("/");t[0]&&"/"==t[0].charAt(0)&&(o="/"+o);return o}(arguments)},t}]),angular.module("LINDGE.Service.TimingQueue",[]).factory("TimingQueue",["$timeout","$q",function(t,e){function n(t,e,n){if(this._timer=null,this._stamp=-1,this._blockQueue=!1,this._flag=!1,this.blocked=!1,"function"!=typeof t)throw new TypeError("Invalid task callback");this._task=t,this._cond=e||null,this._run=null,this.threshold=9e3,this.interval=Number(n)||1e3}return n.prototype._getTime=function(){return(new Date).getTime()},n.prototype._updateTime=function(){this._stamp=this._getTime()},n.prototype.update=function(){this._flag=!0},n.prototype._stampOverseeds=function(){return this._stamp>=0&&this._getTime()-this._stamp>=this.threshold},n.prototype.clearStamp=function(){this._stamp=-1},n.prototype.start=function(n,r){this._blockQueue=!!n,this.blocked=!1;var o=!!this._cond;this._updateTime();var i=this;function a(){var n=i._blockQueue&&i.blocked,s=!r||i._flag;if(!n&&i._stampOverseeds()&&s&&(i._flag=!1,!o||i._cond()))if(i._blockQueue){i.blocked=!0;var u=e.defer();u.promise.finally(function(){i.blocked=!1,i._updateTime()}),i._task(u)}else i._task(null),i._updateTime();i._timer=t(a,i.interval)}this._run=a,this._timer=t(a)},n.prototype.flush=function(){this._timer&&(t.cancel(this._timer),this._timer=t(this._run),this._flag=!0,this._stamp=100)},n.prototype.terminate=function(){this._timer&&(t.cancel(this._timer),this._run=null)},n}]),angular.module("LINDGE.Service.StateMachine",["LINDGE.Service.SDK"]).factory("StateMachine",["$SDK",function(t){return t.StateMachine.StateMachine}]),angular.module("LINDGE.Service.Transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(t,e,n){var r=function(o,i,a){a=a||{};var s=t.defer(),u=r[a.animation?"animationEndEventName":"transitionEndEventName"],c=function(t){n.$apply(function(){o.unbind(u,c),s.resolve(o)})};return u&&o.bind(u,c),e(function(){angular.isString(i)?o.addClass(i):angular.isFunction(i)?i(o):angular.isObject(i)&&o.css(i),u||s.resolve(o)}),s.promise.cancel=function(){u&&o.unbind(u,c),s.reject("Transition cancelled")},s.promise},o=document.createElement("trans");function i(t){for(var e in t)if(void 0!==o.style[e])return t[e]}return r.transitionEndEventName=i({WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}),r.animationEndEventName=i({WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"}),r}])}();